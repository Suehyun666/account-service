# Quarkus Application Configuration
quarkus.application.name=account-command-service
quarkus.application.version=1.0.0

# gRPC Server Configuration
quarkus.http.host=0.0.0.0
quarkus.http.port=9053
quarkus.grpc.server.host=0.0.0.0
quarkus.grpc.server.port=50053
quarkus.grpc.server.use-separate-server=true

# Health Check
quarkus.smallrye-health.enabled=true
quarkus.grpc.server.grpc-health.enabled=true
quarkus.grpc.server.health.enabled=true

# gRPC Server Performance Tuning
quarkus.grpc.server.max-inbound-message-size=16384

# Database Configuration
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${DB_USER:hts}
quarkus.datasource.password=${DB_PASSWORD:hts}

# JDBC Configuration
quarkus.datasource.jdbc.url=${DB_URL:jdbc:postgresql://localhost:5432/hts_account}
quarkus.datasource.jdbc.min-size=16
quarkus.datasource.jdbc.max-size=16
quarkus.datasource.jdbc.initial-size=16
quarkus.datasource.jdbc.acquisition-timeout=2000
quarkus.datasource.jdbc.leak-detection-interval=30s
quarkus.datasource.jdbc.max-lifetime=15m
quarkus.datasource.jdbc.validation-query-sql=SELECT 1
quarkus.datasource.jdbc.background-validation=true

# JOOQ Configuration
quarkus.jooq.dialect=POSTGRES

# Flyway
quarkus.flyway.repair-at-start=true
quarkus.flyway.clean-at-start=false
quarkus.flyway.migrate-at-start=true
quarkus.flyway.baseline-on-migrate=true
quarkus.flyway.locations=db/migration

# Account Service Configuration
account.shard.count=16

# Vert.x Configuration
quarkus.vertx.event-loops-pool-size=32
quarkus.vertx.internal-blocking-pool-size=32

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."io.grpc".level=INFO
quarkus.log.category."io.smallrye".level=INFO

# Metrics Configuration
quarkus.micrometer.enabled=true
quarkus.micrometer.registry-enabled-default=true
quarkus.micrometer.binder-enabled-default=true
quarkus.micrometer.binder.jvm=true
quarkus.micrometer.binder.system=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# Kafka Configuration
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
mp.messaging.connector.smallrye-kafka.allow.auto.create.topics=true
mp.messaging.connector.smallrye-kafka.request.timeout.ms=5000
mp.messaging.connector.smallrye-kafka.session.timeout.ms=10000
mp.messaging.connector.smallrye-kafka.heartbeat.interval.ms=3000

# Outgoing: Account Created Events
mp.messaging.outgoing.account-created-events.connector=smallrye-kafka
mp.messaging.outgoing.account-created-events.topic=account.created.events
mp.messaging.outgoing.account-created-events.value.serializer=org.apache.kafka.common.serialization.ByteArraySerializer
mp.messaging.outgoing.account-created-events.key.serializer=org.apache.kafka.common.serialization.LongSerializer

# Outgoing: Account Deleted Events
mp.messaging.outgoing.account-deleted-events.connector=smallrye-kafka
mp.messaging.outgoing.account-deleted-events.topic=account.deleted.events
mp.messaging.outgoing.account-deleted-events.value.serializer=org.apache.kafka.common.serialization.ByteArraySerializer
mp.messaging.outgoing.account-deleted-events.key.serializer=org.apache.kafka.common.serialization.LongSerializer

# Incoming: Order Filled Events
mp.messaging.incoming.order-filled-events.connector=smallrye-kafka
mp.messaging.incoming.order-filled-events.topic=order.filled.events
mp.messaging.incoming.order-filled-events.value.deserializer=org.apache.kafka.common.serialization.ByteArrayDeserializer
mp.messaging.incoming.order-filled-events.key.deserializer=org.apache.kafka.common.serialization.LongDeserializer
mp.messaging.incoming.order-filled-events.group.id=account-service
mp.messaging.incoming.order-filled-events.auto.offset.reset=earliest
mp.messaging.incoming.order-filled-events.enable.auto.commit=false
mp.messaging.incoming.order-filled-events.commit-strategy=throttled
mp.messaging.incoming.order-filled-events.throttled.unprocessed-record-max-age.ms=10000


# Container Image Configuration
quarkus.container-image.group=suehunpark
quarkus.container-image.name=account-command-service
quarkus.container-image.registry=docker.io